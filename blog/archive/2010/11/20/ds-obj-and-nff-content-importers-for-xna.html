<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>3DS, OBJ, and NFF content importers for XNA 4.0 - timjones.io</title>

    <meta name="description" content="Blog and open source projects by Tim Jones.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="alternate" href="http://timjones.io/feed.xml" type="application/atom+xml" title="timjones.io Feed">

    <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/site.css">

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                processEscapes: true
            },
            showProcessingMessages: false
        });
    </script>
    <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML.js"></script>
</head>

<body>
    <header class="masthead">
        <div class="container">
            <nav>
                <ul>
                    <li>
                        <h3><a href="/" class="site-title">Tim Jones</a></h3>
                    </li>
                    <li><a href="/projects/">Projects</a></li>
                    <li><a href="/about/">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <main>
            <article>
    <h1 class="post-title">3DS, OBJ, and NFF content importers for XNA 4.0</h1>

    <div class="post-date">
        <time datetime="2010-11-20T00:09:00+00:00">20 November 2010</time>
    </div>

    

    <p>Continuing my recent hobby of <a href="/blog/archive/2010/11/13/introducing-stitchup-generating-shaders-from-hlsl-shader-fragments">digging up old projects</a> and <a href="/blog/archive/2010/11/16/an-xna--content-pipeline-processor-for-terrain">releasing them</a>, I want to mention a couple of content importers that I have been working on.</p>

<p>I’d like to preface this by saying that I’ve acted as an aggregator; most of this code was ported from somebody else’s work, as I have acknowledged below. If there are any bugs, they are almost certainly my fault, and if you find one please <a href="https://github.com/tgjones/osiris/issues">log an issue</a>.</p>

<p>So the 3 content importers I’ve added to <a href="https://github.com/tgjones/osiris">Osiris</a> (my catch-all project for XNA content pipeline extensions, including the <a href="/blog/archive/2010/11/16/an-xna--content-pipeline-processor-for-terrain">terrain geomipmapping processor</a>) are:</p>

<ul>
  <li><em>3DS</em> - Lots of free 3D models on the web are in this format. My code was ported from <a href="http://www.pixelnerve.com/processing/libraries/mri3ds/">MRI3DS</a>, a Java 3DS importer.</li>
  <li><em>OBJ</em> - Again, this is a common format. My code was ported from <a href="http://www.pixelnerve.com/processing/libraries/objimport/">OBJ_IMPORT</a>, a Java OBJ importer. I’m aware that there is an <a href="http://create.msdn.com/en-us/education/catalog/sample/custom_model_importer">OBJ importer on App Hub</a>, that may well be better than this one - the more choice the better, right?</li>
  <li><em>NFF</em> - Actually, it’s generous to call this an <a href="http://tog.acm.org/resources/SPD/NFF.TXT">NFF</a> importer. All I really wanted was a simple file format to create primitives, and NFF was the closest I could find. I have implemented a tiny amount of the specification, and then bolted on my own additions. Have a look in the <a href="https://github.com/tgjones/osiris/tree/master/src/ModelsDemo/ModelsDemoContent/Primitives/">ModelsDemo content project</a> for some examples. Just because it will break up the monotony of this post, I’ll include one of the NFF files here:</li>
</ul>

<div class="language-c highlighter-rouge"><pre class="highlight"><code><span class="cp"># A material
</span><span class="n">f</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span> <span class="mi">0</span><span class="p">.</span><span class="mi">3</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="mi">16</span> <span class="mi">0</span>

<span class="cp"># A plane at 0 0 0 with a 'width' of 50 and 'height' of 40
</span><span class="n">x</span><span class="o">-</span><span class="n">plane</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">50</span> <span class="mi">40</span>

<span class="cp"># A red material
</span><span class="n">f</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="mi">16</span> <span class="mi">0</span>

<span class="cp"># A cube at -50 0 0 with a 'size' of 50
</span><span class="n">x</span><span class="o">-</span><span class="n">cube</span> <span class="o">-</span><span class="mi">50</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">50</span>

<span class="cp"># A green material
</span><span class="n">f</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span> <span class="mi">0</span><span class="p">.</span><span class="mi">1</span> <span class="mi">0</span><span class="p">.</span><span class="mi">8</span> <span class="mi">0</span><span class="p">.</span><span class="mi">2</span> <span class="mi">16</span> <span class="mi">0</span>

<span class="cp"># A teapot at 50 0 0 with a 'size' of 50, with a tessellation level of 10
</span><span class="n">tess</span> <span class="mi">10</span> <span class="n">x</span><span class="o">-</span><span class="n">teapot</span> <span class="mi">50</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">50</span>
</code></pre>
</div>

<p>The available primitives are:</p>

<ul>
  <li>Teapot (every good primitive library needs one of these)</li>
  <li>Cube</li>
  <li>Sphere</li>
  <li>Cylinder</li>
  <li>Torus</li>
  <li>Plane</li>
</ul>

<p>And before you ask, yes, the code for these is adapted from the <a href="http://create.msdn.com/en-US/education/catalog/sample/primitives_3d">Primitives3D sample</a> on App Hub. Like I said, most of what I’ve done with these importers is package up other people’s work, in a hopefully easy to use way.</p>

<p>As with all the software in my recent posts, this code is open source and <a href="https://github.com/tgjones/osiris">hosted on GitHub</a>. If you dig through the code, you might notice that it calls out to two other libraries called <a href="https://github.com/tgjones/meshellator">Meshellator</a> and <a href="https://github.com/tgjones/nexus">Nexus</a>. These are two other open source projects I’m working on, but I’m not ready to talk about them in any great detail. The reason I’ve abstracted the mesh importing away from XNA is that I use the same library for a nascent software rasterizer.</p>

<p>On a tangential note, I have three reasons for releasing this software as open source:</p>

<ul>
  <li>I’m legally obligated to by the licenses of the original code I ported from.</li>
  <li>I strongly believe in doing my bit to help us all, as the XNA community, to move beyond this kind of entry-level functionality and make some <a href="http://www.indiegames-uprising.com/">cool games</a>. It makes me happy to know that there are <a href="http://www.google.com/search">many other people</a>?q=open+source+xna&amp;ie=utf-8&amp;oe=utf-8&amp;aq=t&amp;rls=org.mozilla:en-GB:official&amp;client=firefox-a doing the same thing.</li>
  <li>In the past I have been one of the people who, when asked if they are going to release something as open source, have answered “yes, I want to, but I’m just going to polish it a little bit more”, and then you never hear from them again. No longer - so what I’m releasing may not be bug-free, but I will respond to all comments and logged issues, and hey, it’s open source.</li>
</ul>

</article>

<nav class="pagination">
  
    <a class="pagination-item" href="/blog/archive/2010/11/18/some-stitchup-updates">Previous</a>
  
  
    <a class="pagination-item" href="/blog/archive/2010/11/20/xna-model-viewer-inside-visual-studio">Next</a>
  
</nav>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://timjones.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </main>
    </div>

    <footer class="site-footer">
        <div class="container">
            <div class="social">
    <ul>
        <li>
            <a href="https://twitter.com/_tim_jones_" rel="external">
                <svg width="30" height="30" viewBox="0 0 30 32" xmlns="http://www.w3.org/2000/svg" aria-labelledby="title">
  <title id="title">Twitter icon</title>
  <desc>A gray icon for following me on Twitter</desc>
  <path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path>
</svg>
                <span>Follow me on Twitter</span>
            </a>
        </li>
        <li>
            <a href="https://github.com/tgjones" rel="external">
                <svg width="30" height="30" viewBox="0 0 27 32" xmlns="http://www.w3.org/2000/svg" aria-labelledby="title">
  <title id="title">GitHub icon</title>
  <desc>A gray icon for following me on GitHub</desc>
  <path d="M13.728 2.272q3.712 0 6.88 1.856t4.992 4.992 1.824 6.88q0 4.48-2.624 8.064t-6.752 4.96q-0.48 0.096-0.704-0.128t-0.224-0.544q0-0.032 0-1.376t0-2.4q0-1.728-0.928-2.528 1.024-0.096 1.824-0.32t1.696-0.704 1.44-1.184 0.96-1.856 0.352-2.688q0-2.144-1.408-3.68 0.672-1.632-0.128-3.648-0.512-0.16-1.472 0.192t-1.632 0.8l-0.672 0.416q-1.664-0.48-3.424-0.48t-3.456 0.48q-0.256-0.192-0.736-0.48t-1.504-0.704-1.504-0.224q-0.8 2.016-0.16 3.648-1.408 1.536-1.408 3.68 0 1.504 0.384 2.656t0.928 1.888 1.44 1.184 1.664 0.704 1.824 0.32q-0.672 0.64-0.864 1.856-0.384 0.16-0.8 0.256t-1.024 0.096-1.152-0.384-0.992-1.12q-0.352-0.576-0.864-0.928t-0.896-0.448l-0.352-0.032q-0.384 0-0.512 0.064t-0.096 0.224 0.16 0.256 0.224 0.192l0.128 0.096q0.384 0.192 0.768 0.672t0.576 0.928l0.192 0.416q0.224 0.672 0.768 1.088t1.184 0.544 1.248 0.096 0.992-0.032l0.416-0.096q0 0.704 0 1.6t0.032 0.96q0 0.32-0.256 0.544t-0.704 0.128q-4.128-1.376-6.752-4.96t-2.624-8.064q0-3.744 1.856-6.88t4.96-4.992 6.912-1.856zM5.184 21.984q0.064-0.128-0.096-0.224-0.192-0.032-0.256 0.032-0.032 0.128 0.128 0.224t0.224-0.032zM5.76 22.592q0.128-0.096-0.032-0.288-0.192-0.16-0.288-0.064-0.128 0.096 0.032 0.288t0.288 0.064zM6.272 23.392q0.192-0.128 0-0.352-0.128-0.224-0.288-0.096-0.16 0.096 0 0.32t0.288 0.128zM7.040 24.128q0.128-0.128-0.064-0.32-0.224-0.224-0.352-0.064-0.16 0.16 0.064 0.352 0.192 0.192 0.352 0.032zM8.064 24.576q0.032-0.192-0.256-0.288-0.256-0.064-0.32 0.128t0.224 0.288q0.256 0.096 0.352-0.128zM9.184 24.672q0-0.224-0.32-0.192-0.288 0-0.288 0.192 0 0.224 0.32 0.192 0.288 0 0.288-0.192zM10.208 24.512q-0.032-0.224-0.32-0.16-0.288 0.032-0.256 0.256t0.32 0.128 0.256-0.224z"></path>
</svg>        
                <span>Follow me on GitHub</span>
            </a>
        </li>
        <li>
            <a href="https://www.strava.com/athletes/timjones" rel="external">
                <?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="30px" height="30px" viewBox="0 0 244 244" enable-background="new 0 0 244 244" xml:space="preserve">
<g>
	<path fill="none" d="M122,242C55.8,242,2,188.2,2,122S55.8,2,122,2c66.2,0,120,53.8,120,120S188.2,242,122,242z M122,21.7
		c-55.3,0-100.3,45-100.3,100.3s45,100.3,100.3,100.3s100.3-45,100.3-100.3S177.3,21.7,122,21.7z"/>
	<path d="M122,21.7c-55.3,0-100.3,45-100.3,100.3s45,100.3,100.3,100.3s100.3-45,100.3-100.3S177.3,21.7,122,21.7z"
		/>
	<g>
		<polyline fill="#fff" points="139.4,184.3 112.3,131.1 128.4,131.1 139.4,152.6 150.2,131.1 166.3,131.1 139.4,184.3 		"/>
		<polygon fill="#fff" points="113.9,102.2 128.6,131.2 150.1,131.2 113.7,59.7 77.7,131.2 99.3,131.2 113.9,102.2 		"/>
	</g>
</g>
</svg>

                <span>Follow me on Strava</span>
            </a>
        </li>
    </ul>
</div>

            <p>© 2017 Tim Jones. All rights reserved.</p>
        </div>
    </footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5166698-5', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>