<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">

    <title>Introducing Shader Playground - timjones.io</title>

    <meta name="description" content="Blog and open source projects by Tim Jones.">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="alternate" href="http://timjones.io/feed.xml" type="application/atom+xml" title="timjones.io Feed">

    <link href="https://fonts.googleapis.com/css?family=Noto+Sans|Noto+Serif|Source+Code+Pro" rel="stylesheet">
    <link rel="stylesheet" href="/assets/css/site.css">

    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
            tex2jax: {
                inlineMath: [['$','$'], ['\\(','\\)']],
                processEscapes: true
            },
            showProcessingMessages: false
        });
    </script>
    <script type="text/javascript" async src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML.js"></script>
</head>

<body>
    <header class="masthead">
        <div class="container">
            <nav>
                <ul>
                    <li>
                        <h3><a href="/" class="site-title">Tim Jones</a></h3>
                    </li>
                    <li><a href="/projects/">Projects</a></li>
                    <li><a href="/about/">About</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="container">
        <main>
            <article>
    <h1 class="post-title">Introducing Shader Playground</h1>

    <div class="post-date">
        <time datetime="2018-05-19T05:00:00+00:00">19 May 2018</time>
    </div>

    
    <div class="post-tags">
        <ul>
            
            <li><a href="/blog/tags/shaders">shaders</a></li>
            
            <li><a href="/blog/tags/hlsl">HLSL</a></li>
            
            <li><a href="/blog/tags/glsl">GLSL</a></li>
            
            <li><a href="/blog/tags/spir-v">SPIR-V</a></li>
            
        </ul>
    </div>
    

    <p><strong>TL/DR: I’ve made a new website called <a href="http://shader-playground.timjones.io">Shader Playground</a> that is sort of like <a href="https://godbolt.org/">Compiler Explorer</a> but for shading languages. You can compile HLSL and GLSL using <code class="highlighter-rouge">fxc.exe</code>, <code class="highlighter-rouge">dxc.exe</code>, <code class="highlighter-rouge">glslangValidator.exe</code>, <code class="highlighter-rouge">spirv-cross.exe</code>, and <code class="highlighter-rouge">mali-sc.exe</code>. You can see the compiler output and disassembly. You can chain multiple shader compilers together to transpile one language to another. You can share permalinks to shaders.</strong></p>

<p><img src="/assets/resized/shader-playground-1600x1167.png" alt="Screenshot of Shader Playground website" srcset="/assets/resized/shader-playground-400x292.png 400w,/assets/resized/shader-playground-800x583.png 800w,/assets/resized/shader-playground-1200x875.png 1200w,/assets/resized/shader-playground-1600x1167.png 1600w" /></p>

<ul>
  <li><a href="http://shader-playground.timjones.io">Shader Playground</a></li>
</ul>

<p>As you may know, I am very interested in shaders and shading languages (<a href="/blog/archive/2010/12/30/stitchup-in-action">exhibit A</a>, <a href="/blog/archive/2014/01/07/introducing-hlslunit-unit-tests-for-your-hlsl-shader-code">exhibit B</a>, <a href="/blog/archive/2014/11/24/getting-started-with-jetbrains-nitra">exhibit C</a>, <a href="/blog/archive/2015/09/02/parsing-direct3d-shader-bytecode">exhibit D</a>, <a href="/blog/archive/2015/10/06/introducing-hlsl-tools-for-visual-studio">exhibit E</a>). I frequently want to test little bits of shader syntax to see what the compiler does. That was why I made the <a href="/blog/archive/2017/02/11/try-hlsl-online">Try HLSL</a> website, first for myself and then I put it online last year. It was really very simple - type or paste HLSL code on the left, choose whether to compile with the old (<code class="highlighter-rouge">fxc.exe</code>) or new (<code class="highlighter-rouge">dxc.exe</code>) HLSL compilers, and see the disassembly (or compiler errors) on the right. It’s been quite popular - I don’t have stats on it, but <a href="https://twitter.com/_tim_jones_/status/984034078788870144">my recent tweet</a> about it was RT’d quite a bit, so I think this is something that people find useful.</p>

<p>However, the Try HLSL website was always a bit limited. It only worked with HLSL, and it only worked with Microsoft’s two HLSL compilers. Given the diversity of today’s shader landscape (GLSL, SPIR-V, Metal, etc.), I wanted to make it better. So I did.</p>

<p>Let me first list the features:</p>

<ul>
  <li><strong>Multiple input languages</strong> (HLSL and GLSL, with the potential for more in the future)</li>
  <li><strong>Multiple compilers</strong>:
    <ul>
      <li><code class="highlighter-rouge">fxc.exe</code></li>
      <li><code class="highlighter-rouge">dxc.exe</code></li>
      <li><code class="highlighter-rouge">glslangValidator.exe</code></li>
      <li><code class="highlighter-rouge">spirv-cross.exe</code></li>
      <li><code class="highlighter-rouge">mali-sc.exe</code></li>
    </ul>
  </li>
  <li><strong>Compiler chaining</strong>: create multiple compilation steps, so you can pipe HLSL to SPIR-V to Metal, for example.</li>
  <li><strong>Permalinks</strong>: share links to a specific “playground”, with input code and all the compilation steps saved.</li>
</ul>

<p>Now I’ll go into more detail on some of these.</p>

<h2 id="compilers">Compilers</h2>

<p><img src="/assets/resized/shader-playground-compiler-options-400x436.png" alt="Screenshot of compiler dropdown" srcset="/assets/resized/shader-playground-compiler-options-400x436.png 400w" /></p>

<p>The old Try HLSL site only supported Microsoft’s old and new HLSL compilers, so with Shader Playground I wanted to expand that. You can now access the following compilers. The exact ones shown in the dropdown will depend on the input language you have selected.</p>

<ul>
  <li><a href="https://msdn.microsoft.com/en-us/library/windows/desktop/bb232919(v=vs.85).aspx">FXC</a> - <code class="highlighter-rouge">fxc.exe</code>, Microsoft’s legacy HLSL compiler</li>
  <li><a href="https://github.com/Microsoft/DirectXShaderCompiler">DXC</a> - <code class="highlighter-rouge">dxc.exe</code>, Microsoft’s new open-source HLSL compiler</li>
  <li><a href="https://github.com/KhronosGroup/glslang">glslang</a> - <code class="highlighter-rouge">glslangValidator.exe</code>, Khronos’s reference GLSL compiler that also now has an HLSL frontend</li>
  <li><a href="https://github.com/KhronosGroup/SPIRV-Cross">SPIRV-Cross</a> - <code class="highlighter-rouge">spirv-cross.exe</code>, Khronos’s tool for disassembling SPIR-V back into high level languages (GLSL, HLSL, Metal, C++)</li>
  <li><a href="https://developer.arm.com/products/software-development-tools/graphics-development-tools/mali-offline-compiler">Mali offline compiler</a> - <code class="highlighter-rouge">mali-sc.exe</code>, ARM’s offline compiler tool</li>
</ul>

<h2 id="compiler-chaining">Compiler chaining</h2>

<p>When a compiler outputs a language (or binary format) that can be fed into another compiler, you get an “Add Compiler” button. Click this, and you’ll be able to chain together up to 5 compilers. Here’s an example of compiling HLSL using DXC, outputting SPIR-V, piping that into SPIRV-Cross, and outputting Metal:</p>

<p><img src="/assets/resized/shader-playground-compiler-chaining-1600x1296.png" alt="Screenshot of compiler chaining" srcset="/assets/resized/shader-playground-compiler-chaining-400x324.png 400w,/assets/resized/shader-playground-compiler-chaining-800x648.png 800w,/assets/resized/shader-playground-compiler-chaining-1200x972.png 1200w,/assets/resized/shader-playground-compiler-chaining-1600x1296.png 1600w" /></p>

<p>You get the idea. Here are the current compilers with their input and output languages. I plan to add more to this list:</p>

<ul>
  <li>FXC
    <ul>
      <li>Inputs:
        <ul>
          <li>HLSL</li>
        </ul>
      </li>
      <li>Outputs:
        <ul>
          <li>DXBC</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>DXC
    <ul>
      <li>Inputs:
        <ul>
          <li>HLSL</li>
        </ul>
      </li>
      <li>Outputs:
        <ul>
          <li>DXIL</li>
          <li>SPIR-V</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>glslangValidator
    <ul>
      <li>Inputs:
        <ul>
          <li>GLSL</li>
          <li>HLSL</li>
        </ul>
      </li>
      <li>Outputs:
        <ul>
          <li>SPIR-V</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>SPIRV-Cross
    <ul>
      <li>Inputs:
        <ul>
          <li>SPIR-V</li>
        </ul>
      </li>
      <li>Outputs:
        <ul>
          <li>GLSL</li>
          <li>Metal</li>
          <li>HLSL</li>
          <li>C++</li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Mali offline compiler
    <ul>
      <li>Inputs:
        <ul>
          <li>GLSL</li>
          <li>SPIR-V</li>
        </ul>
      </li>
      <li>Outputs:
        <ul>
          <li>[None]</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<p>You can use any valid combination of these, although right now that basically means using SPIRV-Cross somewhere in the chain.</p>

<p>Some compilers have multiple outputs. When using DXC or glslang, for example, you can view the abstract syntax tree (AST) from the compiler:</p>

<p><img src="/assets/resized/shader-playground-output-ast-1600x561.png" alt="Screenshot of AST output" srcset="/assets/resized/shader-playground-output-ast-400x140.png 400w,/assets/resized/shader-playground-output-ast-800x281.png 800w,/assets/resized/shader-playground-output-ast-1200x421.png 1200w,/assets/resized/shader-playground-output-ast-1600x561.png 1600w" /></p>

<p>With all compilers you can view the compiler output as well as the disassembly.</p>

<h2 id="permalinks">Permalinks</h2>

<p>Want to share a link to a shader? Once you’ve got everything setup (with whatever input code and compilers and parameters you want), click the “Share Permalink” button at the top-right:</p>

<p><img src="/assets/resized/shader-playground-permalink-400x222.png" alt="Screenshot of Share Permalink button" srcset="/assets/resized/shader-playground-permalink-400x222.png 400w" /></p>

<p>That will open a dialog, and after a short wait you’ll get a URL that you can copy:</p>

<p><img src="/assets/resized/shader-playground-permalink-dialog-1200x363.png" alt="Screenshot of Share Permalink dialog" srcset="/assets/resized/shader-playground-permalink-dialog-400x121.png 400w,/assets/resized/shader-playground-permalink-dialog-800x242.png 800w,/assets/resized/shader-playground-permalink-dialog-1200x363.png 1200w" /></p>

<h2 id="how-it-works">How it works</h2>

<p>I wrote this site in C#, using ASP.NET Core. <a href="https://github.com/tgjones/shader-playground">The source code is up on GitHub</a>. It’s hosted in Azure as an App Service (not on the free plan, for reasons, so if it gets popular I might start a Patreon…). In most cases I’m calling out to the backend shader compilers using <code class="highlighter-rouge">Process.Start(...)</code>, which is a bit scary because compiler options that you select on the site are passed as command line parameters to the backend compilers. I’m validating the input as best I can, and there’s a timeout on running the process, but still… please don’t break it.</p>

<p>I’m using GitHub Gists as the “database” for permalinks. There’s a rate limit on the GitHub API that could theoretically be hit, but I think it will be fine. If it’s not I’ll have to think of something else.</p>

<h2 id="future">Future</h2>

<p>Next, I plan to add more compilers:</p>

<ul>
  <li><a href="https://github.com/GPUOpen-Tools/RGA">Radeon GPU Analyzer (RGA)</a></li>
  <li><a href="https://github.com/Unity-Technologies/HLSLcc">HLSLcc</a></li>
  <li><a href="https://community.imgtec.com/developers/powervr/tools/pvrshadereditor/">PowerVR</a></li>
  <li><a href="https://github.com/aras-p/glsl-optimizer">GLSL optimizer</a></li>
  <li><a href="https://github.com/aras-p/hlsl2glslfork">hlsl2glslfork</a></li>
  <li><a href="https://github.com/Thekla/hlslparser">HLSLParser</a></li>
  <li><a href="https://github.com/shader-slang/slang">Slang</a></li>
</ul>

<p>If you have a particular compiler that you’d like me to prioritise adding, please let me know.</p>

<p>Or if you want to dig in yourself, the whole Shader Playground website is <a href="https://github.com/tgjones/shader-playground">open source and on GitHub</a>. Contributions or feature suggestions are welcome! Bug reports are less welcome but still appreciated :)</p>

<p>And a grab bag of other things I’m thinking about:</p>

<ul>
  <li>I’d also like to support multiple versions per compiler, so for example for <code class="highlighter-rouge">dxc.exe</code>, you’d be able to compare the outputs of multiple versions of that compiler, as it develops.</li>
  <li>I’d like to add support for Unity shaders, but <a href="https://twitter.com/_tim_jones_/status/993813451276369921">it’s not at all straightforward</a>, if it’s possible at all.</li>
  <li>The mobile version of the site is functional, but not ideal. My web dev knowledge is a bit out of date these days, so I need to brush up on flexbox in order to get things working how I want.</li>
</ul>

<p>If you want an offline version of Shader Playground, I highly recommend looking at Josh Barczak’s <a href="https://github.com/jbarczak/Pyramid">Pyramid Shader Analyzer</a>. I got a lot of inspiration from that project, so thank you Josh.</p>

</article>

<nav class="pagination">
  
    <a class="pagination-item" href="/blog/archive/2018/03/06/parsing-command-and-conquer-generals-replay-files">Previous</a>
  
  
    <span class="pagination-item">Next</span>
  
</nav>

<div id="disqus_thread"></div>
<script>
    (function() { // DON'T EDIT BELOW THIS LINE
    var d = document, s = d.createElement('script');
    s.src = 'https://timjones.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        </main>
    </div>

    <footer class="site-footer">
        <div class="container">
            <div class="social">
    <ul>
        <li>
            <a href="https://twitter.com/_tim_jones_" rel="external">
                <svg width="30" height="30" viewBox="0 0 30 32" xmlns="http://www.w3.org/2000/svg" aria-labelledby="title">
  <title id="title">Twitter icon</title>
  <desc>A gray icon for following me on Twitter</desc>
  <path d="M28.928 7.296q-1.184 1.728-2.88 2.976 0 0.256 0 0.736 0 2.336-0.672 4.64t-2.048 4.448-3.296 3.744-4.608 2.624-5.792 0.96q-4.832 0-8.832-2.592 0.608 0.064 1.376 0.064 4.032 0 7.168-2.464-1.888-0.032-3.36-1.152t-2.048-2.848q0.608 0.096 1.088 0.096 0.768 0 1.536-0.192-2.016-0.416-3.328-1.984t-1.312-3.68v-0.064q1.216 0.672 2.624 0.736-1.184-0.8-1.888-2.048t-0.704-2.752q0-1.568 0.8-2.912 2.176 2.656 5.248 4.256t6.656 1.76q-0.16-0.672-0.16-1.312 0-2.4 1.696-4.064t4.064-1.696q2.528 0 4.224 1.824 1.952-0.384 3.68-1.408-0.672 2.048-2.56 3.2 1.664-0.192 3.328-0.896z"></path>
</svg>
                <span>Follow me on Twitter</span>
            </a>
        </li>
        <li>
            <a href="https://github.com/tgjones" rel="external">
                <svg width="30" height="30" viewBox="0 0 27 32" xmlns="http://www.w3.org/2000/svg" aria-labelledby="title">
  <title id="title">GitHub icon</title>
  <desc>A gray icon for following me on GitHub</desc>
  <path d="M13.728 2.272q3.712 0 6.88 1.856t4.992 4.992 1.824 6.88q0 4.48-2.624 8.064t-6.752 4.96q-0.48 0.096-0.704-0.128t-0.224-0.544q0-0.032 0-1.376t0-2.4q0-1.728-0.928-2.528 1.024-0.096 1.824-0.32t1.696-0.704 1.44-1.184 0.96-1.856 0.352-2.688q0-2.144-1.408-3.68 0.672-1.632-0.128-3.648-0.512-0.16-1.472 0.192t-1.632 0.8l-0.672 0.416q-1.664-0.48-3.424-0.48t-3.456 0.48q-0.256-0.192-0.736-0.48t-1.504-0.704-1.504-0.224q-0.8 2.016-0.16 3.648-1.408 1.536-1.408 3.68 0 1.504 0.384 2.656t0.928 1.888 1.44 1.184 1.664 0.704 1.824 0.32q-0.672 0.64-0.864 1.856-0.384 0.16-0.8 0.256t-1.024 0.096-1.152-0.384-0.992-1.12q-0.352-0.576-0.864-0.928t-0.896-0.448l-0.352-0.032q-0.384 0-0.512 0.064t-0.096 0.224 0.16 0.256 0.224 0.192l0.128 0.096q0.384 0.192 0.768 0.672t0.576 0.928l0.192 0.416q0.224 0.672 0.768 1.088t1.184 0.544 1.248 0.096 0.992-0.032l0.416-0.096q0 0.704 0 1.6t0.032 0.96q0 0.32-0.256 0.544t-0.704 0.128q-4.128-1.376-6.752-4.96t-2.624-8.064q0-3.744 1.856-6.88t4.96-4.992 6.912-1.856zM5.184 21.984q0.064-0.128-0.096-0.224-0.192-0.032-0.256 0.032-0.032 0.128 0.128 0.224t0.224-0.032zM5.76 22.592q0.128-0.096-0.032-0.288-0.192-0.16-0.288-0.064-0.128 0.096 0.032 0.288t0.288 0.064zM6.272 23.392q0.192-0.128 0-0.352-0.128-0.224-0.288-0.096-0.16 0.096 0 0.32t0.288 0.128zM7.040 24.128q0.128-0.128-0.064-0.32-0.224-0.224-0.352-0.064-0.16 0.16 0.064 0.352 0.192 0.192 0.352 0.032zM8.064 24.576q0.032-0.192-0.256-0.288-0.256-0.064-0.32 0.128t0.224 0.288q0.256 0.096 0.352-0.128zM9.184 24.672q0-0.224-0.32-0.192-0.288 0-0.288 0.192 0 0.224 0.32 0.192 0.288 0 0.288-0.192zM10.208 24.512q-0.032-0.224-0.32-0.16-0.288 0.032-0.256 0.256t0.32 0.128 0.256-0.224z"></path>
</svg>        
                <span>Follow me on GitHub</span>
            </a>
        </li>
        <li>
            <a href="https://www.strava.com/athletes/timjones" rel="external">
                <?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="30px" height="30px" viewBox="0 0 244 244" enable-background="new 0 0 244 244" xml:space="preserve">
<g>
	<path fill="none" d="M122,242C55.8,242,2,188.2,2,122S55.8,2,122,2c66.2,0,120,53.8,120,120S188.2,242,122,242z M122,21.7
		c-55.3,0-100.3,45-100.3,100.3s45,100.3,100.3,100.3s100.3-45,100.3-100.3S177.3,21.7,122,21.7z"/>
	<path d="M122,21.7c-55.3,0-100.3,45-100.3,100.3s45,100.3,100.3,100.3s100.3-45,100.3-100.3S177.3,21.7,122,21.7z"
		/>
	<g>
		<polyline fill="#fff" points="139.4,184.3 112.3,131.1 128.4,131.1 139.4,152.6 150.2,131.1 166.3,131.1 139.4,184.3 		"/>
		<polygon fill="#fff" points="113.9,102.2 128.6,131.2 150.1,131.2 113.7,59.7 77.7,131.2 99.3,131.2 113.9,102.2 		"/>
	</g>
</g>
</svg>

                <span>Follow me on Strava</span>
            </a>
        </li>
    </ul>
</div>

            <p>© 2017 Tim Jones. All rights reserved.</p>
        </div>
    </footer>

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-5166698-5', 'auto');
  ga('send', 'pageview');
</script>
</body>

</html>